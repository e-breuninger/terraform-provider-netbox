---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "netbox_virtual_machine Resource - terraform-provider-netbox"
subcategory: ""
description: |-
  
---

# netbox_virtual_machine (Resource)

Per [the docs](https://netbox.readthedocs.io/en/stable/core-functionality/virtualization/):

> A virtual machine represents a virtual compute instance hosted within a cluster. Each VM must be assigned to exactly one cluster.
> Like devices, each VM can be assigned a platform and/or functional role, and must have one of the following operational statuses assigned to it:
> 
> - Active
> - Offline
> - Planned
> - Staged
> - Failed
> - Decommissioning
> 
> Additional fields are available for annotating the vCPU count, memory (GB), and disk (GB) allocated to each VM. A VM may be allocated a partial vCPU count (e.g. 1.5 vCPU).
> Each VM may optionally be assigned to a tenant. Virtual machines may have virtual interfaces assigned to them, but do not support any physical component.


## Example Usage

### Minimum required for VM
```terraform
// Assumes vmw-cluster-01 exists in Netbox
data "netbox_cluster" "vmw-cluster-01" {
    name = "vmw-cluster-01"
}

resource "netbox_virtual_machine" "base-vm" {
    cluster_id = data.netbox_cluster.vmw-cluster-01.id
    name = "myvm-1"
}
```

### VM with basic details
```terraform
// Assumes vmw-cluster-01 exists in Netbox
data "netbox_cluster" "vmw-cluster-01" {
    name = "vmw-cluster-01"
}

resource "netbox_virtual_machine" "basic-vm" {
    cluster_id = data.netbox_cluster.vmw-cluster-01.id
    name = "myvm-2"
    disk_size_gb = 40
    memory_mb = 4092
    vcpus = 2
}
```

### VM with full details

```terraform
// Assumes vmw-cluster-01 exists as a cluster in Netbox
data "netbox_cluster" "vmw-cluster-01" {
    name = "vmw-cluster-01"
}

// Assumes customer-a exists as a tenant in Netbox
data "netbox_tenant" "customer-a" {
    name = "Customer A"
}

resource "netbox_virtual_machine" "full-vm" {
    cluster_id = data.netbox_cluster.vmw-cluster-01.id
    name = "myvm-3"
    disk_size_gb = 40
    memory_mb = 4092
    vcpus = 2
    role_id = 31 // This corresponds to the Netbox ID for a given role
    tenant_id = data.netbox_tenant.customer-a.id
}
```


<!-- schema generated by tfplugindocs -->
## Schema

### Required

- **cluster_id** (Number)
- **name** (String)

### Optional

- **comments** (String)
- **disk_size_gb** (Number)
- **id** (String) The ID of this resource.
- **memory_mb** (Number)
- **platform_id** (Number)
- **role_id** (Number)
- **tags** (Set of String)
- **tenant_id** (Number)
- **vcpus** (Number)

### Read-Only

- **primary_ipv4** (Number)


