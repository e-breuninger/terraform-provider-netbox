---
# generated by https://github.com/fbreckle/terraform-plugin-docs
page_title: "netbox_virtual_machine Resource - terraform-provider-netbox"
subcategory: "Virtualization"
description: |-
  From the official documentation https://docs.netbox.dev/en/stable/core-functionality/virtualization/#virtual-machines:
  A virtual machine represents a virtual compute instance hosted within a cluster. Each VM must be assigned to exactly one cluster.
  Like devices, each VM can be assigned a platform and/or functional role
---

# netbox_virtual_machine (Resource)

From the [official documentation](https://docs.netbox.dev/en/stable/core-functionality/virtualization/#virtual-machines):

> A virtual machine represents a virtual compute instance hosted within a cluster. Each VM must be assigned to exactly one cluster.
>
> Like devices, each VM can be assigned a platform and/or functional role

## Example Usage

```terraform
// Assumes vmw-cluster-01 exists in Netbox
data "netbox_cluster" "vmw_cluster_01" {
  name = "vmw-cluster-01"
}

resource "netbox_virtual_machine" "base_vm" {
  cluster_id = data.netbox_cluster.vmw_cluster_01.id
  name       = "myvm-1"
}
// Assumes vmw-cluster-01 exists in Netbox
data "netbox_cluster" "vmw_cluster_01" {
  name = "vmw-cluster-01"
}

resource "netbox_virtual_machine" "basic_vm" {
  cluster_id   = data.netbox_cluster.vmw_cluster_01.id
  name         = "myvm-2"
  disk_size_gb = 40
  memory_mb    = 4092
  vcpus        = "2"
}
// Assumes vmw-cluster-01 exists as a cluster in Netbox
data "netbox_cluster" "vmw_cluster_01" {
  name = "vmw-cluster-01"
}

// Assumes customer-a exists as a tenant in Netbox
data "netbox_tenant" "customer_a" {
  name = "Customer A"
}

resource "netbox_virtual_machine" "full_vm" {
  cluster_id   = data.netbox_cluster.vmw_cluster_01.id
  name         = "myvm-3"
  disk_size_gb = 40
  memory_mb    = 4092
  vcpus        = "2"
  role_id      = 31 // This corresponds to the Netbox ID for a given role
  tenant_id    = data.netbox_tenant.customer_a.id
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `name` (String)

### Optional

- `cluster_id` (Number) If this is set to a cluster that has a site, you have to set `site_id` as well. At least one of `site_id` or `cluster_id` must be given.
- `comments` (String)
- `custom_fields` (Map of String)
- `device_id` (Number)
- `disk_size_gb` (Number)
- `memory_mb` (Number)
- `platform_id` (Number)
- `role_id` (Number)
- `site_id` (Number) At least one of `site_id` or `cluster_id` must be given.
- `status` (String) Valid values are `offline`, `active`, `planned`, `staged`, `failed` and `decommissioning`. Defaults to `active`.
- `tags` (Set of String)
- `tenant_id` (Number)
- `vcpus` (Number)

### Read-Only

- `id` (String) The ID of this resource.
- `primary_ipv4` (Number)


